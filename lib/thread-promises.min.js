(()=>{"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var a=function(){function a(n){var r=this;e(this,a),t(this,"onFullfilledCallback",(function(){})),t(this,"onRejectedCallback",(function(){})),this.executor=n;for(var l=arguments.length,o=new Array(l>1?l-1:0),c=1;c<l;c++)o[c-1]=arguments[c];if(this.parameters=o,!window.Worker)return new Promise(n);setTimeout((function(){r.createWorker(),r.startWorker()}))}var r,l;return r=a,(l=[{key:"onWorkerMessage",value:function(e){console.log(e)}},{key:"createWorker",value:function(){var e=new Blob([this.createWorkerFunction()]),n=(window.URL||window.webkitURL,window.URL.createObjectURL(e));this.worker=new Worker(n),this.worker.onmessage=this.handleMessage.bind(this)}},{key:"handleMessage",value:function(e){var n=e.data,t=n.data;switch(n.type){case"onFullfilledCallback":this.onFullfilledCallback(t);break;case"onRejectedCallback":this.onRejectedCallback(t)}}},{key:"startWorker",value:function(){this.worker.postMessage({parameters:this.parameters})}},{key:"createWorkerFunction",value:function(){return e=this.executor.toString(),"\n  function getExecutor() {\n      return (".concat(e,');\n  }\n  function onFullfilledCallback(data) {\n    self.postMessage({\n      type: "onFullfilledCallback",\n      data,\n    });\n    self.close();\n  }\n  function onRejectedCallback(data) {\n    self.postMessage({\n      type: "onRejectedCallback",\n      data,\n    });\n    self.close();\n  }\n  const executor = getExecutor();\n  self.onmessage = function ({\n    data: { parameters },\n  }) {\n    executor(onFullfilledCallback, onRejectedCallback, ...(parameters || []));\n  };\n');var e}},{key:"then",value:function(e){return this.onFullfilledCallback=e,this}},{key:"catch",value:function(e){return this.onRejectedCallback=e,this}}])&&n(r.prototype,l),a}();window.TPromise=a})();